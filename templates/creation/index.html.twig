{% extends 'base.html.twig' %}

{% block title %}Hello CreationController!
{% endblock %}

{% block body %}
	<h1 class="display-full">Emissions</h1>

	<table id="tableEmission" class="table">
		<thead>
			<tr>
				<th>ID</th>
				<th>NOM</th>
				<th>NOMLONG</th>
				<th>DESCRIPTION</th>
				<th>IMG</th>
				<th>INSCRIPTION</th>
				<th>ACTIONS</th>
			</tr>
		</thead>
		<tbody>
			{% for emission in emissions %}
				<tr class="emission-row" data-id="{{ emission.NOM }}" onclick="show('emission')">
					<td>{{ emission.ID }}</td>
					<td>{{ emission.NOM }}</td>
					<td>{{ emission.NOMLONG }}</td>
					<td>{{ emission.DESCRIPTION }}</td>
					<td><img class="preview" src="{{asset('data/rubrique/' ~ emission.IMG)}}"/></td>
					<td>{{ emission.INSCRIPTION ? 'Oui' : 'Non' }}</td>
					<td>
						<a href="{{ path('app_emission_edit', {'ID': emission.NOM}) }}">edit</a>
						<a href="{{ path('app_emission_delete', {'ID': emission.ID}) }}">delete</a>
					</td>
				</tr>
			{% else %}
				<tr>
					<td colspan="7">Pas d'Ã©mission</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

	<a href="{{ path('app_emission_new') }}" class="new_emission">NOUVELLE EMISSION</a>

	<div style="height: 5vh;"></div>

	<h1 class="display-full">Audios</h1>
	<table id="tableAudio" class="table">
		<thead>
			<tr>
				<th>ID</th>
				<th>NOM</th>
				<th>DESCRIPTION</th>
				<th>HEURE</th>
				<th>DATE</th>
				<th>AUDIO</th>
				<th>AUTEURS</th>
				<th>ACTIONS</th>
			</tr>
		</thead>
		<tbody class="audios">
			{% for audio in audios %}
				<tr class="audios-row" data-id="{{ audio.ID }}" >
					<td>{{ audio.ID }}</td>
					<td>{{ audio.NOM }}</td>
					<td>{{ audio.DESCRIPTION }}</td>
					<td>{{ audio.HEURE.format('H:i') }}</td>
					<td>{{ audio.DATE.format('Y-m-d') }}</td>
					<td><audio controls><source src="{{asset('data/audio/' ~ audio.AUDIO)}}"/></audio></td>
					<td>{{ audio.AUTEURS }}</td>
					<td>
						<a href="{{ path('app_audio_edit', {'id': audio.ID}) }}">edit</a>
						<a href="{{ path('app_audio_delete', {'id': audio.ID}) }}">delete</a>
					</td>
				</tr>
			{% else %}
				<tr>
					<td colspan="7">Pas d'audios</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

	<a href="{{ path('app_audio_new') }}" class="new_audio">NOUVEL AUDIO</a>

	<div style="height: 5vh;"></div>

	<h1 class="display-full">Equipe</h1>
	<table id="tableMembre" class="table">
		<thead>
			<tr>
				<th>ID</th>
				<th>PRENOM</th>
				<th>NOM</th>
				<th>DESCRIPTION</th>
				<th>ACTIONS</th>
			</tr>
		</thead>
		<tbody>
			{% for membre in membres %}
				<tr onclick="show('equipe')">
					<td>{{ membre.ID }}</td>
					<td>{{ membre.PRENOM }}</td>
					<td>{{ membre.NOM }}</td>
					<td>{{ membre.DESCRIPTION }}</td>
					<td>
						<a href="{{ path('app_equipe_edit', {'id': membre.ID }) }}">edit</a>
						<a href="{{ path('app_equipe_delete', {'id': membre.ID}) }}">delete</a>
					</td>
				</tr>
			{% else %}
				<tr>
					<td colspan="7">Pas de membres...</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
	<a href="{{ path('app_equipe_new') }}" class="new_membre">NOUVEAU MEMBRE</a>

	<div style="height: 5vh;"></div>

	<h1 class="display-full">Inscriptions</h1>

		<table class="table">
			<thead>
				<tr>
					<th>Id</th>
					<th>NOM</th>
					<th>PRENOM</th>
					<th>TEL</th>
					<th>MAIL</th>
					<th>DATE</th>
					<th>Emission</th>
					<th>actions</th>
				</tr>
			</thead>
			<tbody>
			{% for inscription in inscriptions %}
				<tr>
					<td>{{ inscription.id }}</td>
					<td>{{ inscription.NOM }}</td>
					<td>{{ inscription.PRENOM }}</td>
					<td>{{ inscription.TEL }}</td>
					<td>{{ inscription.MAIL }}</td>
					<td>{{ inscription.DATE ? inscription.DATE|date('Y-m-d') : '' }}</td>
					<td>{{ inscription.EMS }} </td>
					<td>
						<a href="{{ path('app_inscription_show', {'id': inscription.id}) }}">show</a>
						<a href="{{ path('app_inscription_edit', {'id': inscription.id}) }}">edit</a>
					</td>
				</tr>
			{% else %}
				<tr>
					<td colspan="7">no records found</td>
				</tr>
			{% endfor %}
			</tbody>
		</table>
	</div>

	<script>
	
	function show( type ) {
		var id = event.target.parentElement.dataset.id;
		switch (type) {
			case 'emission':
				window.location.href = "{{ path('app_emission_show', {'NOM': 'ID'}) }}".replace('ID', id);
				break;
			case 'audio':
				window.location.href = "{{ path('app_audio_show', {'id': 'ID'}) }}".replace('ID', id);
				break;
			case 'equipe':
				window.location.href = "{{ path('app_membres_index') }}";
				break;
		}
	}

	</script>
{% endblock %}
